{"version":3,"file":"789.aa6888dbbf94ca690449.js","mappings":"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","sources":["webpack://@mattermost/webapp/./components/gif_picker/components/InfiniteScroll/index.js","webpack://@mattermost/webapp/./packages/mattermost-redux/src/utils/gfycat_sdk.ts","webpack://@mattermost/webapp/./packages/mattermost-redux/src/actions/gifs.ts","webpack://@mattermost/webapp/./components/gif_picker/utils/constants.js","webpack://@mattermost/webapp/./components/widgets/icons/gif_search_icon.tsx","webpack://@mattermost/webapp/./components/widgets/icons/gif_search_clear_icon.tsx","webpack://@mattermost/webapp/./components/gif_picker/components/SearchBar/index.jsx","webpack://@mattermost/webapp/./components/widgets/icons/gif_trending_icon.tsx","webpack://@mattermost/webapp/./components/widgets/icons/gif_reactions_icon.tsx","webpack://@mattermost/webapp/./components/gif_picker/components/Header/index.jsx","webpack://@mattermost/webapp/./components/gif_picker/components/App/index.jsx","webpack://@mattermost/webapp/./components/gif_picker/components/Categories/index.jsx","webpack://@mattermost/webapp/./components/gif_picker/components/SearchItem/index.jsx","webpack://@mattermost/webapp/./components/gif_picker/components/SearchGrid/SearchGrid.jsx","webpack://@mattermost/webapp/./components/gif_picker/components/SearchGrid/index.js","webpack://@mattermost/webapp/./components/gif_picker/components/Search/index.jsx","webpack://@mattermost/webapp/./components/gif_picker/components/Trending/index.jsx","webpack://@mattermost/webapp/./components/gif_picker/gif_picker.jsx","webpack://@mattermost/webapp/./node_modules/gfycat-sdk/dist/gfycat-sdk.umd.bundle.min.js"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends PureComponent {\n    static propTypes = {\n        children: PropTypes.array,\n        element: PropTypes.string,\n        hasMore: PropTypes.bool,\n        initialLoad: PropTypes.bool,\n        loader: PropTypes.object,\n        loadMore: PropTypes.func.isRequired,\n        pageStart: PropTypes.number,\n        threshold: PropTypes.number,\n        useWindow: PropTypes.bool,\n        isReverse: PropTypes.bool,\n        containerHeight: PropTypes.number,\n        scrollPosition: PropTypes.number,\n    }\n\n    static defaultProps = {\n        element: 'div',\n        hasMore: false,\n        initialLoad: true,\n        pageStart: 0,\n        threshold: 250,\n        useWindow: true,\n        isReverse: false,\n        containerHeight: null,\n        scrollPosition: null,\n    }\n\n    componentDidMount() {\n        this.pageLoaded = this.props.pageStart;\n        this.attachScrollListener();\n        this.setScrollPosition();\n    }\n\n    componentDidUpdate() {\n        this.attachScrollListener();\n    }\n\n    render() {\n        const {\n            children,\n            element,\n            hasMore,\n            initialLoad, // eslint-disable-line no-unused-vars\n            loader,\n            loadMore, // eslint-disable-line no-unused-vars\n            pageStart, // eslint-disable-line no-unused-vars\n            threshold, // eslint-disable-line no-unused-vars\n            useWindow, // eslint-disable-line no-unused-vars\n            isReverse, // eslint-disable-line no-unused-vars\n            scrollPosition, // eslint-disable-line no-unused-vars\n            containerHeight,\n            ...props\n        } = this.props;\n\n        props.ref = (node) => {\n            this.scrollComponent = node;\n        };\n\n        const elementProps = containerHeight ? {...props, style: {height: containerHeight}} : props;\n\n        return React.createElement(element, elementProps, children, hasMore && (loader || this.defaultLoader));\n    }\n\n    calculateTopPosition(el) {\n        if (!el) {\n            return 0;\n        }\n        return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n    }\n\n    setScrollPosition() {\n        const {scrollPosition} = this.props;\n        if (scrollPosition !== null) {\n            window.scrollTo(0, scrollPosition);\n        }\n    }\n\n    scrollListener = () => {\n        const el = this.scrollComponent;\n        const scrollEl = window;\n\n        let offset;\n        if (this.props.useWindow) {\n            var scrollTop = ('pageYOffset' in scrollEl) ? scrollEl.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n            if (this.props.isReverse) {\n                offset = scrollTop;\n            } else {\n                offset = this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n            }\n        } else if (this.props.isReverse) {\n            offset = el.parentNode.scrollTop;\n        } else {\n            offset = el.scrollHeight - el.parentNode.scrollTop - el.parentNode.clientHeight;\n        }\n\n        if (offset < Number(this.props.threshold)) {\n            this.detachScrollListener();\n\n            // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n            if (typeof this.props.loadMore === 'function') {\n                this.props.loadMore(this.pageLoaded += 1);\n            }\n        }\n    }\n\n    attachScrollListener() {\n        if (!this.props.hasMore) {\n            return;\n        }\n\n        let scrollEl = window;\n        if (this.props.useWindow === false) {\n            scrollEl = this.scrollComponent.parentNode;\n        }\n\n        scrollEl.addEventListener('scroll', this.scrollListener);\n        scrollEl.addEventListener('resize', this.scrollListener);\n\n        if (this.props.initialLoad) {\n            this.scrollListener();\n        }\n    }\n\n    detachScrollListener() {\n        var scrollEl = window;\n        if (this.props.useWindow === false) {\n            scrollEl = this.scrollComponent.parentNode;\n        }\n\n        scrollEl.removeEventListener('scroll', this.scrollListener);\n        scrollEl.removeEventListener('resize', this.scrollListener);\n    }\n\n    componentWillUnmount() {\n        this.detachScrollListener();\n    }\n\n    // Set a defaut loader for all your `InfiniteScroll` components\n    setDefaultLoader(loader) {\n        this.defaultLoader = loader;\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nimport Gfycat from 'gfycat-sdk';\nconst defaultKey = '2_KtH_W5';\nconst defaultSecret = '3wLVZPiswc3DnaiaFoLkDvB4X0IV6CpMkj4tf2inJRsBY6-FnkT08zGmppWFgeof';\nlet activeKey: string|null = null;\nlet activeSecret: string | null = null;\n\nlet instance: any = null;\nexport default function gfycatSdk(key: string, secret: string): any {\n    if (instance && activeKey === key && activeSecret === secret) {\n        return instance;\n    }\n\n    if (!key || !secret) {\n        instance = new Gfycat({client_id: defaultKey, client_secret: defaultSecret});\n        return instance;\n    }\n\n    activeKey = key;\n    activeSecret = secret;\n    instance = new Gfycat({client_id: key, client_secret: secret});\n    return instance;\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nimport {GifTypes} from 'mattermost-redux/action_types';\nimport {Client4} from 'mattermost-redux/client';\nimport gfycatSdk from 'mattermost-redux/utils/gfycat_sdk';\nimport {DispatchFunc, GetStateFunc} from 'mattermost-redux/types/actions';\nimport {GlobalState} from '@mattermost/types/store';\n\n// APP PROPS\n\nexport function saveAppPropsRequest(props: any) {\n    return {\n        type: GifTypes.SAVE_APP_PROPS,\n        props,\n    };\n}\n\nexport function saveAppProps(appProps: any) {\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        const {GfycatAPIKey, GfycatAPISecret} = getState().entities.general.config;\n        gfycatSdk(GfycatAPIKey!, GfycatAPISecret!).authenticate();\n        dispatch(saveAppPropsRequest(appProps));\n    };\n}\n\n// SEARCH\n\nexport function selectSearchText(searchText: string) {\n    return {\n        type: GifTypes.SELECT_SEARCH_TEXT,\n        searchText,\n    };\n}\n\nexport function updateSearchText(searchText: string) {\n    return {\n        type: GifTypes.UPDATE_SEARCH_TEXT,\n        searchText,\n    };\n}\n\nexport function searchBarTextSave(searchBarText: string) {\n    return {\n        type: GifTypes.SAVE_SEARCH_BAR_TEXT,\n        searchBarText,\n    };\n}\n\nexport function invalidateSearchText(searchText: string) {\n    return {\n        type: GifTypes.INVALIDATE_SEARCH_TEXT,\n        searchText,\n    };\n}\n\nexport function requestSearch(searchText: string) {\n    return {\n        type: GifTypes.REQUEST_SEARCH,\n        searchText,\n    };\n}\n\nexport function receiveSearch({searchText, count, start, json}: {searchText: string; count: number; start: number; json: any}) {\n    return {\n        type: GifTypes.RECEIVE_SEARCH,\n        searchText,\n        ...json,\n        count,\n        start,\n        currentPage: start / count,\n        receivedAt: Date.now(),\n    };\n}\n\nexport function receiveSearchEnd(searchText: string) {\n    return {\n        type: GifTypes.RECEIVE_SEARCH_END,\n        searchText,\n    };\n}\n\nexport function errorSearching(err: any, searchText: string) {\n    return {\n        type: GifTypes.SEARCH_FAILURE,\n        searchText,\n        err,\n    };\n}\n\nexport function receiveCategorySearch({tagName, json}: {tagName: string; json: any}) {\n    return {\n        type: GifTypes.RECEIVE_CATEGORY_SEARCH,\n        searchText: tagName,\n        ...json,\n        receiveAt: Date.now(),\n    };\n}\n\nexport function clearSearchResults() {\n    return {\n        type: GifTypes.CLEAR_SEARCH_RESULTS,\n    };\n}\n\nexport function requestSearchById(gfyId: string) {\n    return {\n        type: GifTypes.SEARCH_BY_ID_REQUEST,\n        payload: {\n            gfyId,\n        },\n    };\n}\n\nexport function receiveSearchById(gfyId: string, gfyItem: any) {\n    return {\n        type: GifTypes.SEARCH_BY_ID_SUCCESS,\n        payload: {\n            gfyId,\n            gfyItem,\n        },\n    };\n}\n\nexport function errorSearchById(err: any, gfyId: string) {\n    return {\n        type: GifTypes.SEARCH_BY_ID_FAILURE,\n        err,\n        gfyId,\n    };\n}\n\nexport function searchScrollPosition(scrollPosition: number) {\n    return {\n        type: GifTypes.SAVE_SEARCH_SCROLL_POSITION,\n        scrollPosition,\n    };\n}\n\nexport function searchPriorLocation(priorLocation: number) {\n    return {\n        type: GifTypes.SAVE_SEARCH_PRIOR_LOCATION,\n        priorLocation,\n    };\n}\n\nexport function searchGfycat({searchText, count = 30, startIndex = 0}: { searchText: string; count?: number; startIndex?: number}) {\n    let start = startIndex;\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        const {GfycatAPIKey, GfycatAPISecret} = getState().entities.general.config;\n        const {resultsByTerm} = getState().entities.gifs.search;\n        if (resultsByTerm[searchText]) {\n            start = resultsByTerm[searchText].start + count;\n        }\n        dispatch(requestSearch(searchText));\n        const sdk = gfycatSdk(GfycatAPIKey!, GfycatAPISecret!);\n        sdk.authenticate();\n        return sdk.search({search_text: searchText, count, start}).then((json: any) => {\n            if (json.errorMessage) {\n                // There was no results before\n                if (resultsByTerm[searchText].items) {\n                    dispatch(receiveSearchEnd(searchText));\n                } else {\n                    dispatch(errorSearching(json, searchText));\n                }\n            } else {\n                dispatch(updateSearchText(searchText));\n                dispatch(cacheGifsRequest(json.gfycats));\n                dispatch(receiveSearch({searchText, count, start, json}));\n\n                const context = getState().entities.gifs.categories.tagsDict[searchText] ?\n                    'category' :\n                    'search';\n                Client4.trackEvent(\n                    'gfycat',\n                    'views',\n                    {context, count: json.gfycats.length, keyword: searchText},\n                );\n            }\n        }).catch(\n            (err: any) => dispatch(errorSearching(err, searchText)),\n        );\n    };\n}\n\nexport function searchCategory({tagName = '', gfyCount = 30, cursorPos = undefined}) {\n    let cursor = cursorPos;\n    return async (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        const {GfycatAPIKey, GfycatAPISecret} = getState().entities.general.config;\n        const {resultsByTerm} = getState().entities.gifs.search;\n        if (resultsByTerm[tagName]) {\n            cursor = resultsByTerm[tagName].cursor;\n        }\n        dispatch(requestSearch(tagName));\n        return gfycatSdk(GfycatAPIKey!, GfycatAPISecret!).getTrendingCategories({tagName, gfyCount, cursor}).then(\n            (json: any) => {\n                if (json.errorMessage) {\n                    if (resultsByTerm[tagName].gfycats) {\n                        dispatch(receiveSearchEnd(tagName));\n                    } else {\n                        dispatch(errorSearching(json, tagName));\n                    }\n                } else {\n                    dispatch(updateSearchText(tagName));\n                    dispatch(cacheGifsRequest(json.gfycats));\n                    dispatch(receiveCategorySearch({tagName, json}));\n\n                    Client4.trackEvent(\n                        'gfycat',\n                        'views',\n                        {context: 'category', count: json.gfycats.length, keyword: tagName},\n                    );\n\n                    // preload categories list\n                    if (tagName === 'trending') {\n                        dispatch(requestCategoriesListIfNeeded() as any);\n                    }\n                }\n            },\n        ).catch((err: any) => dispatch(errorSearching(err, tagName)));\n    };\n}\n\nexport function shouldSearch(state: GlobalState, searchText: string) {\n    const resultsByTerm = state.entities.gifs.search.resultsByTerm[searchText];\n    if (!resultsByTerm) {\n        return true;\n    } else if (resultsByTerm.isFetching) {\n        return false;\n    } else if (resultsByTerm.moreRemaining) {\n        return true;\n    }\n    return resultsByTerm.didInvalidate;\n}\n\nexport function searchIfNeeded(searchText: string) {\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        if (shouldSearch(getState(), searchText)) {\n            if (searchText.toLowerCase() === 'trending') {\n                return dispatch(searchCategory({tagName: searchText}));\n            }\n            return dispatch(searchGfycat({searchText}));\n        }\n        return Promise.resolve();\n    };\n}\n\nexport function searchIfNeededInitial(searchText: string) {\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        dispatch(updateSearchText(searchText));\n        if (shouldSearchInitial(getState(), searchText)) {\n            if (searchText.toLowerCase() === 'trending') {\n                return dispatch(searchCategory({tagName: searchText}));\n            }\n            return dispatch(searchGfycat({searchText}));\n        }\n        return Promise.resolve();\n    };\n}\n\nexport function shouldSearchInitial(state: GlobalState, searchText: string) {\n    const resultsByTerm = state.entities.gifs.search.resultsByTerm[searchText];\n    if (!resultsByTerm) {\n        return true;\n    } else if (resultsByTerm.isFetching) {\n        return false;\n    }\n\n    return false;\n}\n\nexport function searchById(gfyId: string) {\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        const {GfycatAPIKey, GfycatAPISecret} = getState().entities.general.config;\n        dispatch(requestSearchById(gfyId));\n        return gfycatSdk(GfycatAPIKey!, GfycatAPISecret!).searchById({id: gfyId}).then(\n            (response: any) => {\n                dispatch(receiveSearchById(gfyId, response.gfyItem));\n                dispatch(cacheGifsRequest([response.gfyItem]));\n            },\n        ).catch((err: any) => dispatch(errorSearchById(err, gfyId)));\n    };\n}\n\nexport function shouldSearchById(state: GlobalState, gfyId: string) {\n    return !state.entities.gifs.cache.gifs[gfyId]; //TODO investigate, used to be !state.cache.gifs[gfyId];\n}\n\nexport function searchByIdIfNeeded(gfyId: string) {\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        if (shouldSearchById(getState(), gfyId)) {\n            return dispatch(searchById(gfyId));\n        }\n\n        return Promise.resolve(getState().entities.gifs.cache.gifs[gfyId]); //TODO: investigate, used to be getState().cache.gifs[gfyId]\n    };\n}\n\nexport function saveSearchScrollPosition(scrollPosition: number) {\n    return (dispatch: DispatchFunc) => {\n        dispatch(searchScrollPosition(scrollPosition));\n    };\n}\n\nexport function saveSearchPriorLocation(priorLocation: number) {\n    return (dispatch: DispatchFunc) => {\n        dispatch(searchPriorLocation(priorLocation));\n    };\n}\n\nexport function searchTextUpdate(searchText: string) {\n    return (dispatch: DispatchFunc) => {\n        dispatch(updateSearchText(searchText));\n    };\n}\n\nexport function saveSearchBarText(searchBarText: string) {\n    return (dispatch: DispatchFunc) => {\n        dispatch(searchBarTextSave(searchBarText));\n    };\n}\n\n// CATEGORIES\n\nexport function categoriesListRequest() {\n    return {\n        type: GifTypes.REQUEST_CATEGORIES_LIST,\n    };\n}\n\nexport function categoriesListReceived(json: any) {\n    return {\n        type: GifTypes.CATEGORIES_LIST_RECEIVED,\n        ...json,\n    };\n}\n\nexport function categoriesListFailure(err: any) {\n    return {\n        type: GifTypes.CATEGORIES_LIST_FAILURE,\n        err,\n    };\n}\n\nexport function requestCategoriesList({count = 60} = {}) {\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        const {GfycatAPIKey, GfycatAPISecret} = getState().entities.general.config;\n        const state = getState().entities.gifs.categories;\n        if (!shouldRequestCategoriesList(state)) {\n            return Promise.resolve();\n        }\n        dispatch(categoriesListRequest());\n        const {cursor} = state;\n        const options = {\n            ...(count && {count}),\n            ...(cursor && {cursor}),\n        };\n        return gfycatSdk(GfycatAPIKey!, GfycatAPISecret!).getCategories(options).then((json: any) => {\n            const newGfycats = json.tags.reduce((gfycats: any[], tag: any) => {\n                if (tag.gfycats[0] && tag.gfycats[0].width) {\n                    return [...gfycats, ...tag.gfycats];\n                }\n                return gfycats;\n            }, []);\n            dispatch(cacheGifsRequest(newGfycats));\n            dispatch(categoriesListReceived(json));\n        }).catch(\n            (err: any) => {\n                dispatch(categoriesListFailure(err));\n            },\n        );\n    };\n}\n\nexport function requestCategoriesListIfNeeded({\n    count,\n} = {count: undefined}) {\n    return (dispatch: DispatchFunc, getState: GetStateFunc) => {\n        const state = getState().entities.gifs.categories;\n        if (state.tagsList && state.tagsList.length) {\n            return Promise.resolve();\n        }\n        return dispatch(requestCategoriesList({count}));\n    };\n}\n\nexport function shouldRequestCategoriesList(state: {hasMore: boolean; isFetching: boolean; tagsList: any[]}) {\n    const {hasMore, isFetching, tagsList} = state;\n    if (!tagsList || !tagsList.length) {\n        return true;\n    } else if (isFetching) {\n        return false;\n    } else if (hasMore) {\n        return true;\n    }\n    return false;\n}\n\n// CACHE\n\nexport function cacheRequest() {\n    return {\n        type: GifTypes.CACHE_REQUEST,\n        payload: {\n            updating: true,\n        },\n    };\n}\n\nexport function cacheGifs(gifs: any) {\n    return {\n        type: GifTypes.CACHE_GIFS,\n        gifs,\n    };\n}\n\nexport function cacheGifsRequest(gifs: any) {\n    return async (dispatch: DispatchFunc) => {\n        dispatch(cacheRequest());\n        dispatch(cacheGifs(gifs));\n        return {data: true};\n    };\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nexport default {\n    ItemTapAction: {\n        OPEN_EMBED_PAGE: 1,\n        SHARE: 2,\n    },\n\n    Tab: {\n        TRENDING: 0,\n        REACTIONS: 1,\n    },\n\n    appName: {\n        mattermost: 'mattermost',\n    },\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nexport default class GifSearchIcon extends React.PureComponent<React.HTMLAttributes<HTMLSpanElement>> {\n    render() {\n        return (\n            <span {...this.props}>\n                <svg\n                    width='100%'\n                    height='100%'\n                    viewBox='-10 -10 40 40'\n                    version='1.1'\n                >\n                    <g\n                        id='ic_search'\n                        transform='matrix(0.959095,-9.6091e-18,-1.00189e-17,0.959095,-0.0633002,-0.777826)'\n                    >\n                        <path\n                            d='M2.648,15.872C3.433,16.658 4.376,17.287 5.454,17.758C6.553,18.229 7.698,18.454 8.888,18.454C10.728,18.454 12.389,17.938 13.893,16.905L18.18,21.192C18.494,21.506 18.854,21.664 19.302,21.664C19.751,21.664 20.111,21.506 20.447,21.192C20.761,20.855 20.919,20.496 20.919,20.047C20.919,19.621 20.761,19.239 20.447,18.925L16.16,14.638C17.193,13.134 17.709,11.473 17.709,9.633C17.709,8.443 17.484,7.298 17.013,6.198C16.542,5.121 15.913,4.178 15.128,3.393C14.342,2.607 13.399,1.979 12.322,1.507C11.222,1.036 10.077,0.811 8.888,0.811C7.698,0.811 6.553,1.036 5.454,1.507C4.376,1.979 3.433,2.607 2.648,3.393C1.862,4.178 1.234,5.121 0.762,6.198C0.291,7.298 0.066,8.443 0.066,9.633C0.066,10.822 0.291,11.967 0.762,13.067C1.234,14.144 1.862,15.087 2.648,15.872ZM8.888,4.021C10.436,4.021 11.761,4.56 12.861,5.66C13.96,6.76 14.499,8.084 14.499,9.633C14.499,11.181 13.96,12.506 12.861,13.606C11.761,14.705 10.436,15.244 8.888,15.244C7.339,15.244 6.015,14.705 4.915,13.606C3.815,12.506 3.276,11.181 3.276,9.633C3.276,8.084 3.815,6.76 4.915,5.66C6.015,4.56 7.339,4.021 8.888,4.021Z'\n                            style={{fill: 'inherit'}}\n                        />\n                    </g>\n                </svg>\n            </span>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nexport default class GifSearchClearIcon extends React.PureComponent<React.HTMLAttributes<HTMLSpanElement>> {\n    render() {\n        return (\n            <span {...this.props}>\n                <svg\n                    width='100%'\n                    height='100%'\n                    viewBox='-10 -10 40 40'\n                    enableBackground='new 0 0 20 20'\n                    version='1.1'\n                >\n                    <g transform='matrix(0.952381,0,0,1,0,0)'>\n                        <path\n                            fill='inherit'\n                            d='M10.5 11.7L2.2 19.8C2 19.9 1.9 20 1.7 20 1.6 20 1.4 19.9 1.3 19.8L0.2 18.8C0.1 18.7 0 18.5 0 18.3 0 18.2 0.1 18 0.2 17.9L8.3 10 0.2 2.1C0.1 2 0 1.8 0 1.7 0 1.5 0.1 1.3 0.2 1.2L1.3 0.2C1.4 0.1 1.6 0 1.7 0 1.9 0 2 0.1 2.2 0.2L10.5 8.3 18.8 0.2C19 0.1 19.1 0 19.3 0 19.4 0 19.6 0.1 19.7 0.2L20.8 1.2C20.9 1.3 21 1.5 21 1.7 21 1.8 20.9 2 20.8 2.1L12.7 10 20.8 17.9C20.9 18 21 18.2 21 18.3 21 18.5 20.9 18.7 20.8 18.8L19.7 19.8C19.6 19.9 19.4 20 19.3 20 19.1 20 19 19.9 18.8 19.8L10.5 11.7Z'\n                        />\n                    </g>\n                </svg>\n            </span>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\n\nimport {saveSearchScrollPosition, saveSearchBarText, searchTextUpdate} from 'mattermost-redux/actions/gifs';\nimport {getTheme} from 'mattermost-redux/selectors/entities/preferences';\nimport {changeOpacity, makeStyleFromTheme} from 'mattermost-redux/utils/theme_utils';\n\nimport GifSearchIcon from 'components/widgets/icons/gif_search_icon';\nimport GifSearchClearIcon from 'components/widgets/icons/gif_search_clear_icon';\nimport LocalizedInput from 'components/localized_input/localized_input';\nimport {t} from 'utils/i18n';\n\nimport './SearchBar.scss';\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.entities.gifs.categories,\n        ...state.entities.gifs.search,\n        theme: getTheme(state),\n        appProps: state.entities.gifs.app,\n    };\n}\n\nconst mapDispatchToProps = ({\n    saveSearchBarText,\n    saveSearchScrollPosition,\n    searchTextUpdate,\n});\n\nconst getStyle = makeStyleFromTheme((theme) => {\n    return {\n        background: {\n            backgroundColor: theme.centerChannelBg,\n        },\n        icon: {\n            fill: changeOpacity(theme.centerChannelColor, 0.4),\n        },\n        inputBackground: {\n            backgroundColor: theme.centerChannelBg,\n        },\n        input: {\n            borderColor: changeOpacity(theme.centerChannelColor, 0.12),\n        },\n    };\n});\n\nexport class SearchBar extends Component {\n    static propTypes = {\n        searchBarText: PropTypes.string,\n        tagsList: PropTypes.array,\n        theme: PropTypes.object.isRequired,\n        onTrending: PropTypes.func,\n        onSearch: PropTypes.func,\n        onCategories: PropTypes.func,\n        action: PropTypes.string,\n        saveSearchScrollPosition: PropTypes.func,\n        saveSearchBarText: PropTypes.func,\n        searchTextUpdate: PropTypes.func,\n        defaultSearchText: PropTypes.string,\n        handleSearchTextChange: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            inputFocused: false,\n        };\n\n        this.searchTimeout = null;\n\n        const defaultSearchText = this.props.defaultSearchText || '';\n\n        this.props.saveSearchBarText(defaultSearchText);\n        this.props.searchTextUpdate(defaultSearchText);\n    }\n\n    componentDidUpdate(prevProps) {\n        const {searchBarText} = this.props;\n\n        if (searchBarText !== prevProps.searchBarText) {\n            if (searchBarText === 'trending') {\n                this.updateSearchInputValue('');\n            } else {\n                this.updateSearchInputValue(searchBarText);\n            }\n        }\n    }\n\n    /**\n     * Returns text request with hyphens\n     */\n    parseSearchText = (searchText) => {\n        return searchText.trim().split(/ +/).join('-');\n    }\n\n    removeExtraSpaces = (searchText) => {\n        return searchText.trim().split(/ +/).join(' ');\n    }\n\n    updateSearchInputValue = (searchText) => {\n        this.searchInput.value = searchText;\n        this.props.saveSearchBarText(searchText);\n        this.props.handleSearchTextChange(searchText);\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.triggerSearch(this.searchInput.value);\n        this.searchInput.blur();\n    }\n\n    triggerSearch = (searchText) => {\n        const {onSearch} = this.props;\n        this.props.searchTextUpdate(this.parseSearchText(searchText));\n        onSearch();\n        this.props.saveSearchScrollPosition(0);\n    }\n\n    handleChange = (event) => {\n        clearTimeout(this.searchTimeout);\n\n        const searchText = event.target.value;\n\n        const {onCategories, action} = this.props;\n        this.props.saveSearchBarText(searchText);\n        this.props.handleSearchTextChange(searchText);\n\n        if (searchText === '') {\n            onCategories();\n        } else if (action !== 'reactions' || !this.isFilteredTags(searchText)) {\n            // not reactions page or there's no reactions for this search request\n            this.searchTimeout = setTimeout(() => {\n                this.triggerSearch(searchText);\n            }, 500);\n        }\n    }\n\n    focusInput = () => {\n        this.setState({inputFocused: true});\n    }\n\n    blurInput = () => {\n        this.setState({inputFocused: false});\n    }\n\n    /**\n     * Checks if there're reactions for a current searchText\n     */\n    isFilteredTags = (searchText) => {\n        var text = this.removeExtraSpaces(searchText);\n\n        const {tagsList} = this.props;\n        const substr = text.toLowerCase();\n        const filteredTags = tagsList && tagsList.length ? tagsList.filter((tag) => {\n            if (!text || tag.tagName.indexOf(substr) !== -1) {\n                return tag;\n            }\n            return '';\n        }) : [];\n\n        return Boolean(filteredTags.length);\n    }\n\n    clearSearchHandle = () => {\n        const {action, onTrending, onCategories} = this.props;\n        this.updateSearchInputValue('');\n        if (action === 'reactions') {\n            onCategories();\n        } else {\n            onTrending();\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return ((!nextProps.searchBarText && this.props.searchBarText) ||\n            (nextProps.searchBarText && !this.props.searchBarText) ||\n            (nextState.inputFocused !== this.state.inputFocused) ||\n            (nextProps.searchBarText !== this.props.searchBarText));\n    }\n\n    render() {\n        const style = getStyle(this.props.theme);\n        const {searchBarText} = this.props;\n        const clearSearchButton = searchBarText ?\n            (\n                <GifSearchClearIcon\n                    className='ic-clear-search'\n                    style={style.icon}\n                    onClick={this.clearSearchHandle}\n                />\n            ) : null;\n\n        return (\n            <form\n                className='gfycat-search'\n                method='get'\n                target='_top'\n                noValidate=''\n                onSubmit={this.handleSubmit}\n            >\n                <div\n                    className='search-bar'\n                    style={style.background}\n                >\n                    <div\n                        className='search-input-bg'\n                        style={style.inputBackground}\n                    />\n                    <LocalizedInput\n                        className='search-input'\n                        name='searchText'\n                        autoFocus={true}\n                        placeholder={{id: t('gif_picker.gfycat'), defaultMessage: 'Search Gfycat'}}\n                        onChange={this.handleChange}\n                        autoComplete='off'\n                        autoCapitalize='off'\n                        onFocus={this.focusInput}\n                        onBlur={this.blurInput}\n                        ref={(input) => {\n                            this.searchInput = input;\n                            return input;\n                        }}\n                        style={style.input}\n                        value={searchBarText}\n                    />\n                    <GifSearchIcon\n                        className='ic ic-search'\n                        style={style.icon}\n                    />\n                    {clearSearchButton}\n                </div>\n                <button\n                    type='submit'\n                    className='submit-button'\n                />\n            </form>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);\n\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nexport default class GifTrendingIcon extends React.PureComponent<React.HTMLAttributes<HTMLSpanElement>> {\n    render() {\n        return (\n            <span {...this.props}>\n                <svg\n                    className='ic-svg ic-trending-svg'\n                    width='11px'\n                    height='15px'\n                    viewBox='0 0 11 15'\n                    version='1.1'\n                >\n                    <g\n                        id='Finalized-Design'\n                        stroke='none'\n                        fill='inherit'\n                    >\n                        <g\n                            id='GfyCat---Gycat-Tab'\n                            transform='translate(-1212.000000, -619.000000)'\n                            fill='inherit'\n                        >\n                            <g\n                                id='modal---emojis'\n                                transform='translate(1147.000000, 542.000000)'\n                            >\n                                <g\n                                    id='tabs---gfycat'\n                                    transform='translate(1.000000, 68.000000)'\n                                >\n                                    <g id='tab---trending---selected'>\n                                        <path\n                                            d='M69.90625,10.4062776 C69.90625,10.9531513 70.0976562,11.4909106 70.4804688,12.019555 C70.6992188,12.32945 71.1276043,12.7760638 71.765625,13.3593956 C72.3489582,13.9062693 72.7773438,14.3346538 73.0507812,14.6445488 C73.5065106,15.1731932 73.8528644,15.7109525 74.0898438,16.2578262 C74.3632812,16.9505327 74.5,17.6979271 74.5,18.5000083 C74.5,19.4479229 74.2630207,20.3229208 73.7890625,21.1250021 C73.3151043,21.9270834 72.6770832,22.565103 71.875,23.03906 C71.0729168,23.5130171 70.1979168,23.7499958 69.25,23.7499958 C68.3020832,23.7499958 67.4270832,23.5130171 66.625,23.03906 C65.8229168,22.565103 65.1848957,21.9270834 64.7109375,21.1250021 C64.2369793,20.3229208 64,19.4479229 64,18.5000083 C64,17.6432397 64.2005207,16.8320436 64.6015625,16.0664204 C65.0026043,15.3007972 65.5494793,14.6718925 66.2421875,14.1797061 C66.4609375,14.0338733 66.6888019,14.0247585 66.9257812,14.1523625 C67.1627606,14.2799665 67.28125,14.4713723 67.28125,14.7265798 L67.28125,17.6250104 C67.28125,17.9349054 67.3860676,18.1946704 67.5957031,18.4043054 C67.8053387,18.6139405 68.0651043,18.7187578 68.375,18.7187578 C68.6848957,18.7187578 68.9446613,18.6139405 69.1542969,18.4043054 C69.3639324,18.1946704 69.46875,17.9349054 69.46875,17.6250104 C69.46875,17.4427191 69.4049481,17.2330844 69.2773438,16.9961057 C69.2044269,16.8320436 69.0677082,16.576836 68.8671875,16.2304825 C68.4661457,15.5742341 68.1835938,15.0547041 68.0195312,14.6718925 C67.7643231,13.9791859 67.6640625,13.2955938 67.71875,12.6211161 C67.8098957,11.7825763 68.1380207,10.9258077 68.703125,10.0508097 C68.8125,9.86851837 68.9628906,9.76825847 69.1542969,9.75002921 C69.3457031,9.73179994 69.5188801,9.78648731 69.6738281,9.91409132 C69.8287762,10.0416953 69.90625,10.2057574 69.90625,10.4062776 Z M69.2499875,22.437499 C69.9609233,22.437499 70.6171717,22.259765 71.2187328,21.9042971 C71.8202939,21.5488292 72.2988083,21.0703147 72.6542762,20.4687537 C73.0097441,19.8671926 73.1874781,19.2109441 73.1874781,18.5000083 C73.1874781,17.880218 73.0781034,17.3060006 72.8593539,16.7773562 C72.6588337,16.3398572 72.376282,15.9023583 72.0116996,15.4648593 C71.7929502,15.1914225 71.4329248,14.8131683 70.9316241,14.3300964 C70.4303233,13.8470245 70.070298,13.4687703 69.8515485,13.1953335 C69.4869662,12.7760638 69.2135294,12.3567937 69.031238,11.937524 C68.8671759,12.5573143 68.8945196,13.1953335 69.1132691,13.8515819 C69.2408731,14.2343935 69.5143099,14.7812672 69.9335796,15.492203 C70.2252457,15.9661601 70.4166515,16.321628 70.507797,16.5586067 C70.6900884,16.9414183 70.7812338,17.2968862 70.7812338,17.6250104 C70.7812338,18.2812589 70.5442551,18.8463618 70.070298,19.3203189 C69.596341,19.794276 69.031238,20.0312547 68.3749896,20.0312547 C67.7187411,20.0312547 67.1536382,19.794276 66.6796811,19.3203189 C66.205724,18.8463618 65.9687453,18.2812589 65.9687453,17.6250104 L65.9687453,16.0937641 C65.7682251,16.403659 65.60872,16.7819136 65.4902308,17.228527 C65.3717417,17.6751404 65.3124969,18.0989675 65.3124969,18.5000083 C65.3124969,19.2109441 65.4902308,19.8671926 65.8456987,20.4687537 C66.2011666,21.0703147 66.6796811,21.5488292 67.2812422,21.9042971 C67.8828032,22.259765 68.5390517,22.437499 69.2499875,22.437499 Z'\n                                            id='icon---trending'\n                                        />\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n            </span>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nexport default class GifReactionsIcon extends React.PureComponent<React.HTMLAttributes<HTMLSpanElement>> {\n    render() {\n        return (\n            <span {...this.props}>\n                <svg\n                    className='ic-svg ic-reactions-svg'\n                    width='14px'\n                    height='14px'\n                    viewBox='0 0 14 14'\n                    version='1.1'\n                >\n                    <g\n                        id='Finalized-Design'\n                        stroke='none'\n                        fill='inherit'\n                    >\n                        <g\n                            id='GfyCat---Gycat-Tab'\n                            transform='translate(-1348.000000, -620.000000)'\n                            fill='inherit'\n                        >\n                            <g\n                                id='modal---emojis'\n                                transform='translate(1147.000000, 542.000000)'\n                            >\n                                <g\n                                    id='tabs---gfycat'\n                                    transform='translate(1.000000, 68.000000)'\n                                >\n                                    <g\n                                        id='tab---category---deselected'\n                                        transform='translate(138.000000, 0.000000)'\n                                    >\n                                        <path\n                                            d='M62,16 L62,10 L68,10 L68,16 L62,16 Z M64,12 L64,14 L66,14 L66,12 L64,12 Z M70,24 L70,18 L76,18 L76,24 L70,24 Z M72,20 L72,22 L74,22 L74,20 L72,20 Z M70,10 L76,10 L76,16 L70,16 L70,10 Z M74,14 L74,12 L72,12 L72,14 L74,14 Z M62,24 L62,18 L68,18 L68,24 L62,24 Z M64,20 L64,22 L66,22 L66,20 L64,20 Z'\n                                            id='icon---categories'\n                                        />\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n            </span>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\n\nimport {saveSearchBarText, searchTextUpdate} from 'mattermost-redux/actions/gifs';\nimport {getTheme} from 'mattermost-redux/selectors/entities/preferences';\nimport {changeOpacity, makeStyleFromTheme} from 'mattermost-redux/utils/theme_utils';\n\nimport constants from 'components/gif_picker/utils/constants';\nimport SearchBar from 'components/gif_picker/components/SearchBar';\nimport GifTrendingIcon from 'components/widgets/icons/gif_trending_icon';\nimport GifReactionsIcon from 'components/widgets/icons/gif_reactions_icon';\nimport './Header.scss';\n\nfunction mapStateToProps(state) {\n    return {\n        theme: getTheme(state),\n    };\n}\n\nconst mapDispatchToProps = ({\n    saveSearchBarText,\n    searchTextUpdate,\n});\n\nconst getStyle = makeStyleFromTheme((theme) => {\n    return {\n        background: {\n            backgroundColor: theme.centerChannelBg,\n        },\n        header: {\n            borderBottomColor: changeOpacity(theme.centerChannelColor, 0.2),\n        },\n        icon: {\n            fill: changeOpacity(theme.centerChannelColor, 0.3),\n        },\n        iconActive: {\n            fill: theme.centerChannelColor,\n        },\n        iconHover: {\n            fill: changeOpacity(theme.centerChannelColor, 0.8),\n        },\n    };\n});\n\nexport class Header extends PureComponent {\n    static propTypes = {\n        action: PropTypes.string,\n        appProps: PropTypes.object,\n        saveSearchBarText: PropTypes.func,\n        searchTextUpdate: PropTypes.func,\n        theme: PropTypes.object.isRequired,\n        defaultSearchText: PropTypes.string,\n        handleSearchTextChange: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            hovering: '',\n        };\n    }\n\n    render() {\n        const style = getStyle(this.props.theme);\n\n        return (\n            <header\n                className='header-container'\n                style={style.background}\n            >\n                <SearchBar {...this.props}/>\n                <nav\n                    className='nav-bar'\n                    style={style.header}\n                >\n                    {this.renderTabs(this.props, style)}\n                </nav>\n            </header>\n        );\n    }\n\n    renderTabs(props, style) {\n        const {appProps, onTrending, onCategories} = props;\n        const {header} = appProps;\n        return header.tabs.map((tab, index) => {\n            let link;\n            if (tab === constants.Tab.TRENDING) {\n                link = this.renderTab('trending', onTrending, GifTrendingIcon, index, style);\n            } else if (tab === constants.Tab.REACTIONS) {\n                link = this.renderTab('reactions', onCategories, GifReactionsIcon, index, style);\n            }\n            return link;\n        });\n    }\n\n    renderTab(name, callback, Icon, index, style) {\n        var props = this.props;\n        const {action} = props;\n        function callbackWrapper() {\n            props.searchTextUpdate('');\n            props.saveSearchBarText('');\n            callback();\n        }\n        return (\n            <a\n                onClick={callbackWrapper}\n                onMouseOver={() => {\n                    this.setState({hovering: name});\n                }}\n                onMouseOut={() => {\n                    this.setState({hovering: ''});\n                }}\n                style={{cursor: 'pointer'}}\n                key={index}\n            >\n                <div style={{paddingTop: '2px'}}>\n                    <Icon\n                        style={(() => {\n                            if (this.state.hovering === name) {\n                                return style.iconHover;\n                            }\n                            return action === name ? style.iconActive : style.icon;\n                        })()}\n                    />\n                </div>\n            </a>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\n\nimport {saveAppProps} from 'mattermost-redux/actions/gifs';\n\nimport Header from 'components/gif_picker/components/Header';\n\nconst mapDispatchToProps = ({\n    saveAppProps,\n});\n\nexport class App extends PureComponent {\n    static propTypes = {\n        appProps: PropTypes.object,\n        action: PropTypes.string,\n        onCategories: PropTypes.func,\n        onSearch: PropTypes.func,\n        onTrending: PropTypes.func,\n        children: PropTypes.object,\n        saveAppProps: PropTypes.func,\n        authenticateSdk: PropTypes.func,\n        defaultSearchText: PropTypes.string,\n        handleSearchTextChange: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n        const {appProps} = this.props;\n        this.props.saveAppProps(appProps);\n    }\n\n    render() {\n        const {\n            appProps,\n            action,\n            onCategories,\n            onSearch,\n            onTrending,\n            children,\n            defaultSearchText,\n            handleSearchTextChange,\n        } = this.props;\n        const appClassName = 'main-container ' + (appProps.appClassName || '');\n        return (\n            <div className={appClassName}>\n                <Header\n                    appProps={appProps}\n                    action={action}\n                    onCategories={onCategories}\n                    onSearch={onSearch}\n                    onTrending={onTrending}\n                    defaultSearchText={defaultSearchText}\n                    handleSearchTextChange={handleSearchTextChange}\n                />\n                <div className='component-container'>\n                    {children}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(App);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\n\nimport {requestCategoriesList, requestCategoriesListIfNeeded, saveSearchBarText, saveSearchScrollPosition, searchTextUpdate} from 'mattermost-redux/actions/gifs';\n\nimport {trackEvent} from 'actions/telemetry_actions.jsx';\nimport * as PostUtils from 'utils/post_utils';\n\nimport InfiniteScroll from 'components/gif_picker/components/InfiniteScroll';\n\nimport './Categories.scss';\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.entities.gifs.categories,\n        ...state.entities.gifs.cache,\n        appProps: state.entities.gifs.app,\n        searchText: state.entities.gifs.search.searchText,\n        searchBarText: state.entities.gifs.search.searchBarText,\n        hasImageProxy: state.entities.general.config.HasImageProxy,\n    };\n}\n\nconst mapDispatchToProps = ({\n    saveSearchBarText,\n    saveSearchScrollPosition,\n    searchTextUpdate,\n    requestCategoriesList,\n    requestCategoriesListIfNeeded,\n});\n\nexport class Categories extends PureComponent {\n    static propTypes = {\n        appProps: PropTypes.object,\n        gifs: PropTypes.object,\n        hasMore: PropTypes.bool,\n        onSearch: PropTypes.func,\n        onTrending: PropTypes.func,\n        requestCategoriesList: PropTypes.func,\n        requestCategoriesListIfNeeded: PropTypes.func,\n        saveSearchBarText: PropTypes.func,\n        saveSearchScrollPosition: PropTypes.func,\n        searchTextUpdate: PropTypes.func,\n        searchBarText: PropTypes.string,\n        tagsList: PropTypes.array,\n        hasImageProxy: PropTypes.string,\n    }\n\n    componentDidMount() {\n        window.scrollTo(0, 0);\n        this.props.requestCategoriesListIfNeeded();\n        this.sendImpressions();\n    }\n\n    sendImpressions = () => {\n        const {tagsList} = this.props;\n        const gfycats = tagsList.map((tag) => {\n            return {gfyId: tag.gfyId};\n        });\n\n        if (gfycats.length) {\n            trackEvent('gfycat', 'views', {context: 'category_list', count: gfycats.length});\n        }\n    }\n\n    componentWillUnmount() {\n        this.props.saveSearchScrollPosition(0);\n    }\n\n    filterTagsList = () => {\n        const {searchBarText, tagsList} = this.props;\n\n        const substr = searchBarText.toLowerCase().trim().split(/ +/).join(' ');\n        return tagsList && tagsList.length ? tagsList.filter((tag) => {\n            if (!searchBarText || tag.tagName.indexOf(substr) !== -1) {\n                return tag;\n            }\n            return '';\n        }) : [];\n    }\n\n    loadMore = () => {\n        this.props.requestCategoriesList();\n    }\n\n    render() {\n        const {hasMore, tagsList, gifs, onSearch, onTrending, hasImageProxy} = this.props;\n\n        const content = tagsList && tagsList.length ? this.filterTagsList(tagsList).map((item, index) => {\n            const {tagName, gfyId} = item;\n\n            if (!gifs[gfyId]) {\n                return null;\n            }\n\n            const gfyItem = gifs[gfyId];\n            const {max1mbGif, avgColor} = gfyItem;\n            const url = PostUtils.getImageSrc(max1mbGif, hasImageProxy === 'true');\n            const searchText = tagName.replace(/\\s/g, '-');\n            const backgroundImage = {backgroundImage: `url(${url}`};\n            const backgroundColor = {backgroundColor: avgColor};\n            const props = this.props;\n            function callback() {\n                props.searchTextUpdate(tagName);\n                props.saveSearchBarText(tagName);\n                if (searchText === 'trending') {\n                    onTrending();\n                } else {\n                    onSearch();\n                }\n            }\n            return (\n                <a\n                    onClick={callback}\n                    key={index}\n                >\n                    <div className='category-container'>\n                        <div\n                            className='category'\n                            style={{...backgroundImage, ...backgroundColor}}\n                        >\n                            <div className='category-name'>{tagName}</div>\n                        </div>\n                    </div>\n                </a>\n            );\n        }) : [];\n\n        return content && content.length ? (\n            <div\n                className='categories-container'\n            >\n                <InfiniteScroll\n                    hasMore={hasMore}\n                    loadMore={this.loadMore}\n                    threshold={1}\n                >\n                    {content}\n                </InfiniteScroll>\n            </div>\n        ) : (\n            <div\n                className='categories-container'\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Categories);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport {connect} from 'react-redux';\n\nimport PropTypes from 'prop-types';\n\nimport './SearchItem.scss';\nimport * as PostUtils from 'utils/post_utils';\n\nfunction mapStateToProps(state) {\n    return {\n        hasImageProxy: state.entities.general.config.HasImageProxy,\n    };\n}\n\nexport class SearchItem extends PureComponent {\n    static propTypes = {\n        gfyItem: PropTypes.object,\n        top: PropTypes.string,\n        left: PropTypes.string,\n        itemWidth: PropTypes.number,\n        itemClickHandler: PropTypes.func,\n        hasImageProxy: PropTypes.string,\n    }\n\n    render() {\n        const {\n            gfyItem,\n            top,\n            left,\n            itemWidth,\n            itemClickHandler,\n        } = this.props;\n\n        const {width, height, max1mbGif, avgColor} = gfyItem;\n        const {hasImageProxy} = this.props;\n        const url = PostUtils.getImageSrc(max1mbGif, hasImageProxy === 'true');\n\n        const backgroundImage = {backgroundImage: `url(${url})`};\n        const backgroundColor = {backgroundColor: avgColor};\n        const paddingBottom = {paddingBottom: ((itemWidth / width) * height) + 'px'};\n\n        return (\n            <div\n                className='search-item-wrapper'\n                style={{top, left, width: itemWidth ? `${itemWidth}px` : ''}}\n            >\n                <div\n                    className='search-item'\n                    style={{...backgroundImage, ...backgroundColor, ...paddingBottom}}\n                    onClick={() => itemClickHandler(gfyItem)}\n                />\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps)(SearchItem);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\n\nimport {saveSearchScrollPosition} from 'mattermost-redux/actions/gifs';\n\nimport {trackEvent} from 'actions/telemetry_actions.jsx';\n\nimport NoResultsIndicator from 'components/no_results_indicator/no_results_indicator.tsx';\nimport {NoResultsVariant} from 'components/no_results_indicator/types';\n\nimport InfiniteScroll from 'components/gif_picker/components/InfiniteScroll';\nimport SearchItem from 'components/gif_picker/components/SearchItem';\n\nimport './SearchGrid.scss';\n\nconst ITEMS_PADDING = 8;\nconst NUMBER_OF_COLUMNS_PORTRAIT = 2;\nconst NUMBER_OF_COLUMNS_LANDSCAPE = 2;\nconst WEBKIT_SCROLLBAR_WIDTH = 8;\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.entities.gifs.cache,\n        ...state.entities.gifs.search,\n        appProps: state.entities.gifs.app,\n    };\n}\n\nconst mapDispatchToProps = ({\n    saveSearchScrollPosition,\n});\n\nexport class SearchGrid extends PureComponent {\n    static propTypes = {\n        appProps: PropTypes.object,\n        gifs: PropTypes.object,\n        resultsByTerm: PropTypes.object,\n        containerClassName: PropTypes.string,\n        keyword: PropTypes.string, // searchText, tagName\n        handleItemClick: PropTypes.func,\n        loadMore: PropTypes.func,\n        numberOfColumns: PropTypes.number,\n        scrollPosition: PropTypes.number,\n        saveSearchScrollPosition: PropTypes.func,\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            containerWidth: null,\n        };\n        this.scrollPosition = this.props.scrollPosition;\n        this.setNumberOfColumns();\n\n        /**\n         * Inital values for columns heights\n         */\n        this.columnsHeights = Array(this.numberOfColumns).fill(0);\n\n        /**\n         * Items padding value\n         */\n        this.padding = ITEMS_PADDING;\n    }\n\n    componentDidMount() {\n        this.container = document.getElementById('search-grid-container');\n        // eslint-disable-next-line react/no-did-mount-set-state\n        this.setState({\n            ...this.state,\n            containerWidth: this.container.offsetWidth - WEBKIT_SCROLLBAR_WIDTH,\n        });\n        window.addEventListener('resize', this.resizeHandler);\n        window.addEventListener('scroll', this.scrollHandler);\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.keyword !== this.props.keyword) {\n            window.scrollTo(0, 0);\n        }\n    }\n\n    componentWillUnmount() {\n        const {keyword} = this.props;\n        if (keyword !== 'trending') {\n            this.props.saveSearchScrollPosition(this.scrollPosition);\n        }\n\n        window.removeEventListener('resize', this.resizeHandler);\n        window.removeEventListener('scroll', this.scrollHandler);\n    }\n\n    setNumberOfColumns = () => {\n        if (window.matchMedia('(orientation: portrait)').matches) {\n            this.numberOfColumns = NUMBER_OF_COLUMNS_PORTRAIT;\n        } else {\n            this.numberOfColumns = NUMBER_OF_COLUMNS_LANDSCAPE;\n        }\n    }\n\n    itemClickHandler = (gfyItem) => {\n        const {keyword, handleItemClick} = this.props;\n        this.props.saveSearchScrollPosition(this.scrollPosition);\n\n        trackEvent('gfycat', 'shares', {gfyid: gfyItem.gfyId, keyword});\n        handleItemClick(gfyItem);\n    }\n\n    minHeightColumnIndex = () => {\n        return this.columnsHeights.indexOf(Math.min(...this.columnsHeights));\n    }\n\n    maxHeightColumnIndex = () => {\n        return this.columnsHeights.indexOf(Math.max(...this.columnsHeights));\n    }\n\n    maxColumnHeight = () => {\n        return Math.max(...this.columnsHeights);\n    }\n\n    resizeHandler = () => {\n        if (this.state.containerWidth !== this.container.offsetWidth - WEBKIT_SCROLLBAR_WIDTH) {\n            this.setNumberOfColumns();\n            this.setState({\n                ...this.state,\n                containerWidth: this.container.offsetWidth - WEBKIT_SCROLLBAR_WIDTH,\n            });\n            this.columnsHeights = Array(this.numberOfColumns).fill(0);\n        }\n    }\n\n    scrollHandler = () => {\n        this.scrollPosition = window.scrollY;\n    }\n\n    render() {\n        const {\n            containerClassName,\n            gifs,\n            keyword,\n            resultsByTerm,\n            scrollPosition,\n            loadMore,\n        } = this.props;\n\n        const {containerWidth} = this.state;\n        const {moreRemaining, items = [], isEmpty = items.length === 0, isFetching} = resultsByTerm[keyword] ? resultsByTerm[keyword] : {};\n\n        /**\n         * Columns 'left' values\n         */\n        const columnWidth = parseInt(containerWidth / this.numberOfColumns, 10);\n        const leftPosition = Array(this.numberOfColumns).fill(0).map((item, index) => this.padding + ((index * columnWidth) - (index * (this.padding / 2))));\n\n        this.columnsHeights = Array(this.numberOfColumns).fill(this.padding);\n\n        // Item width in %\n        //const itemWidth = this.numberOfColumns === NUMBER_OF_COLUMNS_PORTRAIT ? 100 / NUMBER_OF_COLUMNS_PORTRAIT : 100 / this.numberOfColumns;\n        const itemWidth = 140;\n\n        const searchItems = containerWidth && items.length ?\n            items.map((item, index) => {\n                const gfyItem = gifs[item];\n                const {gfyId} = gfyItem;\n\n                // Position calculation\n                const colIndex = this.minHeightColumnIndex();\n                const top = this.columnsHeights[colIndex] + 'px';\n                const left = leftPosition[colIndex] + 'px';\n                const itemHeight = ((itemWidth / gfyItem.width) * gfyItem.height) + this.padding;\n                this.columnsHeights[colIndex] += itemHeight;\n\n                return (\n                    <SearchItem\n                        gfyItem={gfyItem}\n                        top={top}\n                        left={left}\n                        itemWidth={itemWidth}\n                        itemClickHandler={this.itemClickHandler}\n                        key={`${index}-${gfyId}`}\n                    />\n                );\n            }) : null;\n\n        this.containerHeight = this.maxColumnHeight();\n\n        const content = searchItems ? (\n            <InfiniteScroll\n                className='search-grid-infinite-scroll'\n                pageStart={0}\n                loadMore={loadMore}\n                initialLoad={false}\n                hasMore={moreRemaining}\n                threshold={1}\n                containerHeight={this.containerHeight}\n                scrollPosition={scrollPosition}\n                useWindow={false}\n            >\n                {searchItems}\n            </InfiniteScroll>\n        ) : null;\n\n        const emptySearch = !isFetching && isEmpty ? (\n            <NoResultsIndicator\n                variant={NoResultsVariant.ChannelSearch}\n                titleValues={{channelName: `\"${keyword}\"`}}\n            />\n        ) : null;\n\n        return (\n            <div\n                id='search-grid-container'\n                className={`search-grid-container ${containerClassName}`}\n            >\n                {content}\n                {emptySearch}\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchGrid);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {saveSearchScrollPosition} from 'mattermost-redux/actions/gifs';\n\nimport SearchGrid from './SearchGrid';\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.entities.gifs.cache,\n        ...state.entities.gifs.search,\n        appProps: state.entities.gifs.app,\n    };\n}\n\nfunction mapDispatchToProps() {\n    return {\n        saveSearchScrollPosition,\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchGrid);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {throttle} from 'lodash';\n\nimport {searchIfNeededInitial, searchGfycat} from 'mattermost-redux/actions/gifs';\n\nimport SearchGrid from 'components/gif_picker/components/SearchGrid';\n\nconst GIF_SEARCH_THROTTLE_TIME_MS = 1000;\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.entities.gifs.search,\n    };\n}\n\nconst mapDispatchToProps = ({\n    searchGfycat,\n    searchIfNeededInitial,\n});\n\nexport class Search extends PureComponent {\n    static propTypes = {\n        handleItemClick: PropTypes.func,\n        onCategories: PropTypes.func,\n        searchText: PropTypes.string,\n        searchIfNeededInitial: PropTypes.func,\n        searchGfycat: PropTypes.func,\n    }\n\n    componentDidMount() {\n        const {searchText} = this.props;\n        this.props.searchIfNeededInitial(searchText.split('-').join(' '));\n    }\n\n    componentDidUpdate(prevProps) {\n        const {searchText} = this.props;\n        if (prevProps.searchText !== searchText) {\n            this.throttledSearchGif(searchText);\n        }\n    }\n\n    throttledSearchGif = throttle((searchText) => this.props.searchIfNeededInitial(searchText.split('-').join(' ')),\n        GIF_SEARCH_THROTTLE_TIME_MS,\n    );\n\n    loadMore = () => {\n        const {searchText} = this.props;\n        this.props.searchGfycat({searchText});\n    }\n\n    render() {\n        const {handleItemClick, searchText, onCategories} = this.props;\n\n        return (\n            <SearchGrid\n                keyword={searchText}\n                handleItemClick={handleItemClick}\n                onCategories={onCategories}\n                loadMore={this.loadMore}\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\n\nimport {\n    searchCategory,\n    searchIfNeededInitial,\n    saveSearchScrollPosition,\n} from 'mattermost-redux/actions/gifs';\n\nimport SearchGrid from 'components/gif_picker/components/SearchGrid';\n\nconst mapDispatchToProps = ({\n    searchCategory,\n    searchIfNeededInitial,\n    saveSearchScrollPosition,\n});\n\nexport class Trending extends PureComponent {\n    static propTypes = {\n        handleItemClick: PropTypes.func,\n        onCategories: PropTypes.func,\n        searchCategory: PropTypes.func,\n        searchIfNeededInitial: PropTypes.func,\n        saveSearchScrollPosition: PropTypes.func,\n    }\n\n    componentDidMount() {\n        this.props.searchIfNeededInitial('trending');\n    }\n\n    componentWillUnmount() {\n        this.props.saveSearchScrollPosition(0);\n    }\n\n    loadMore = () => {\n        this.props.searchCategory({tagName: 'trending'});\n    }\n\n    render() {\n        const {handleItemClick, onCategories} = this.props;\n        return (\n            <SearchGrid\n                keyword='trending'\n                handleItemClick={handleItemClick}\n                onCategories={onCategories}\n                loadMore={this.loadMore}\n            />\n        );\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(Trending);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport App from 'components/gif_picker/components/App';\nimport Categories from 'components/gif_picker/components/Categories';\nimport Search from 'components/gif_picker/components/Search';\nimport Trending from 'components/gif_picker/components/Trending';\nimport constants from 'components/gif_picker/utils/constants';\n\nexport const appProps = {\n    appName: constants.appName.mattermost,\n    basePath: '/mattermost',\n    itemTapType: constants.ItemTapAction.SHARE,\n    appClassName: 'gfycat',\n    shareEvent: 'shareMattermost',\n    appId: 'mattermostwebviews',\n    enableHistory: true,\n    header: {\n        tabs: [constants.Tab.TRENDING, constants.Tab.REACTIONS],\n        displayText: false,\n    },\n};\n\nexport default class GifPicker extends React.PureComponent {\n    static propTypes = {\n        onGifClick: PropTypes.func.isRequired,\n        defaultSearchText: PropTypes.string,\n        handleSearchTextChange: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        const action = props.defaultSearchText ? 'search' : 'trending';\n        this.state = {\n            action,\n        };\n    }\n\n    handleTrending = () => {\n        this.setState({\n            action: 'trending',\n        });\n    }\n\n    handleCategories = () => {\n        this.setState({\n            action: 'reactions',\n        });\n    }\n\n    handleSearch = () => {\n        this.setState({\n            action: 'search',\n        });\n    }\n\n    handleItemClick = (gif) => {\n        this.props.onGifClick('![' + gif.title.replace(/]|\\[/g, '\\\\$&') + '](' + gif.max5mbGif + ')');\n    }\n\n    render() {\n        const {action} = this.state;\n        let component;\n        switch (action) {\n        case 'reactions':\n            component = (\n                <Categories\n                    appProps={appProps}\n                    onTrending={this.handleTrending}\n                    onSearch={this.handleSearch}\n                />\n            );\n            break;\n        case 'search':\n            component = (\n                <Search\n                    appProps={appProps}\n                    onCategories={this.handleCategories}\n                    handleItemClick={this.handleItemClick}\n                />\n            );\n            break;\n        case 'trending':\n            component = (\n                <Trending\n                    appProps={appProps}\n                    onCategories={this.handleCategories}\n                    handleItemClick={this.handleItemClick}\n                />\n            );\n            break;\n        }\n        return (\n            <div>\n                <App\n                    appProps={appProps}\n                    action={action}\n                    onTrending={this.handleTrending}\n                    onCategories={this.handleCategories}\n                    onSearch={this.handleSearch}\n                    defaultSearchText={this.props.defaultSearchText}\n                    handleSearchTextChange={this.props.handleSearchTextChange}\n                >\n                    {component}\n                </App>\n            </div>\n        );\n    }\n}\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.GfycatSDK=t():e.GfycatSDK=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"/assets/\",t(t.s=6)}([function(e,t,r){\"use strict\";var n=String.prototype.replace,o=/%20/g;e.exports={default:\"RFC3986\",formatters:{RFC1738:function(e){return n.call(e,o,\"+\")},RFC3986:function(e){return e}},RFC1738:\"RFC1738\",RFC3986:\"RFC3986\"}},function(e,t,r){\"use strict\";var n=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push(\"%\"+((t<16?\"0\":\"\")+t.toString(16)).toUpperCase());return e}(),i=function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],o=0;o<t.length;++o)void 0!==t[o]&&n.push(t[o]);r.obj[r.prop]=n}}return t};t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,o){if(!r)return e;if(\"object\"!=typeof r){if(Array.isArray(e))e.push(r);else{if(\"object\"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if(\"object\"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,i){n.call(e,i)?e[i]&&\"object\"==typeof e[i]?e[i]=t.merge(e[i],r,o):e.push(r):e[i]=r}),e):Object.keys(r).reduce(function(e,i){var a=r[i];return n.call(e,i)?e[i]=t.merge(e[i],a,o):e[i]=a,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\\+/g,\" \"))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t=\"string\"==typeof e?e:String(e),r=\"\",n=0;n<t.length;++n){var i=t.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=t.charAt(n):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},t.compact=function(e){for(var t=[{obj:{o:e},prop:\"o\"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],c=Object.keys(a),s=0;s<c.length;++s){var u=c[s],l=a[u];\"object\"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:a,prop:u}),r.push(l))}return i(t)},t.isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){\"use strict\";var n=r(5),o=r(4),i=r(0);e.exports={formats:i,parse:o,stringify:n}},function(e,t){t.request=function(e,t,r){function n(e){clearTimeout(a),e=e||new Error(\"API request failed\"),r(e)}function o(e){if(clearTimeout(a),c.status>=400)return r(c.status);var n=c.response;try{n=JSON.parse(n),t(n)}catch(e){r(e)}}var i=e.timeout||3e4,a=setTimeout(function(){c.abort(),r(new Error(\"API request exceeded timeout of\",i))},i),c=new XMLHttpRequest;c.addEventListener(\"error\",n),c.addEventListener(\"abort\",n),c.addEventListener(\"load\",o),c.open(e.request.method,e.request.url,!0);var s=e.request.headers||null;s&&Object.keys(s).forEach(function(e){c.setRequestHeader(e,s[e])});var u=JSON.stringify(e.request.payload)||null;u?(c.setRequestHeader(\"Content-Type\",\"application/json\"),c.send(u)):c.send()}},function(e,t,r){\"use strict\";var n=r(1),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:\"&\",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\\?/,\"\"):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,c=n.split(t.delimiter,a),s=0;s<c.length;++s){var u,l,f=c[s],d=f.indexOf(\"]=\"),p=-1===d?f.indexOf(\"=\"):d+1;-1===p?(u=t.decoder(f,i.decoder),l=t.strictNullHandling?null:\"\"):(u=t.decoder(f.slice(0,p),i.decoder),l=t.decoder(f.slice(p+1),i.decoder)),o.call(r,u)?r[u]=[].concat(r[u]).concat(l):r[u]=l}return r},c=function(e,t,r){for(var n=t,o=e.length-1;o>=0;--o){var i,a=e[o];if(\"[]\"===a)i=[],i=i.concat(n);else{i=r.plainObjects?Object.create(null):{};var c=\"[\"===a.charAt(0)&&\"]\"===a.charAt(a.length-1)?a.slice(1,-1):a,s=parseInt(c,10);!isNaN(s)&&a!==c&&String(s)===c&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(i=[],i[s]=n):i[c]=n}n=i}return n},s=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\\.([^.[]+)/g,\"[$1]\"):e,i=/(\\[[^[\\]]*])/,a=/(\\[[^[\\]]*])/g,s=i.exec(n),u=s?n.slice(0,s.index):n,l=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var f=0;null!==(s=a.exec(n))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push(\"[\"+n.slice(s.index)+\"]\"),c(l,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&\"function\"!=typeof r.decoder)throw new TypeError(\"Decoder has to be a function.\");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter=\"string\"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth=\"number\"==typeof r.depth?r.depth:i.depth,r.arrayLimit=\"number\"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder=\"function\"==typeof r.decoder?r.decoder:i.decoder,r.allowDots=\"boolean\"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects=\"boolean\"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes=\"boolean\"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit=\"number\"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling=\"boolean\"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,\"\"===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var o=\"string\"==typeof e?a(e,r):e,c=r.plainObjects?Object.create(null):{},u=Object.keys(o),l=0;l<u.length;++l){var f=u[l],d=s(f,o[f],r);c=n.merge(c,d,r)}return n.compact(c)}},function(e,t,r){\"use strict\";var n=r(1),o=r(0),i={brackets:function(e){return e+\"[]\"},indices:function(e,t){return e+\"[\"+t+\"]\"},repeat:function(e){return e}},a=Date.prototype.toISOString,c={delimiter:\"&\",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return a.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,o,i,a,s,u,l,f,d,p,y){var h=t;if(\"function\"==typeof u)h=u(r,h);else if(h instanceof Date)h=d(h);else if(null===h){if(i)return s&&!y?s(r,c.encoder):r;h=\"\"}if(\"string\"==typeof h||\"number\"==typeof h||\"boolean\"==typeof h||n.isBuffer(h)){if(s){return[p(y?r:s(r,c.encoder))+\"=\"+p(s(h,c.encoder))]}return[p(r)+\"=\"+p(String(h))]}var m=[];if(void 0===h)return m;var g;if(Array.isArray(u))g=u;else{var v=Object.keys(h);g=l?v.sort(l):v}for(var b=0;b<g.length;++b){var j=g[b];a&&null===h[j]||(m=Array.isArray(h)?m.concat(e(h[j],o(r,j),o,i,a,s,u,l,f,d,p,y)):m.concat(e(h[j],r+(f?\".\"+j:\"[\"+j+\"]\"),o,i,a,s,u,l,f,d,p,y)))}return m};e.exports=function(e,t){var r=e,a=t?n.assign({},t):{};if(null!==a.encoder&&void 0!==a.encoder&&\"function\"!=typeof a.encoder)throw new TypeError(\"Encoder has to be a function.\");var u=void 0===a.delimiter?c.delimiter:a.delimiter,l=\"boolean\"==typeof a.strictNullHandling?a.strictNullHandling:c.strictNullHandling,f=\"boolean\"==typeof a.skipNulls?a.skipNulls:c.skipNulls,d=\"boolean\"==typeof a.encode?a.encode:c.encode,p=\"function\"==typeof a.encoder?a.encoder:c.encoder,y=\"function\"==typeof a.sort?a.sort:null,h=void 0!==a.allowDots&&a.allowDots,m=\"function\"==typeof a.serializeDate?a.serializeDate:c.serializeDate,g=\"boolean\"==typeof a.encodeValuesOnly?a.encodeValuesOnly:c.encodeValuesOnly;if(void 0===a.format)a.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,a.format))throw new TypeError(\"Unknown format option provided.\");var v,b,j=o.formatters[a.format];\"function\"==typeof a.filter?(b=a.filter,r=b(\"\",r)):Array.isArray(a.filter)&&(b=a.filter,v=b);var _=[];if(\"object\"!=typeof r||null===r)return\"\";var O;O=a.arrayFormat in i?a.arrayFormat:\"indices\"in a?a.indices?\"indices\":\"repeat\":\"indices\";var w=i[O];v||(v=Object.keys(r)),y&&v.sort(y);for(var q=0;q<v.length;++q){var P=v[q];f&&null===r[P]||(_=_.concat(s(r[P],P,w,l,f,d?p:null,b,y,h,m,j,g)))}var x=_.join(u),A=!0===a.addQueryPrefix?\"?\":\"\";return x.length>0?A+x:\"\"}},function(e,t,r){function n(e,t){if(t)return t(e);if(c)return Promise.reject(e);throw new Error(e)}var o=r(2),i=r(3),a=\"/v1\",c=\"undefined\"!=typeof Promise,s=function(e){if(\"object\"==typeof e&&e.hasOwnProperty(\"client_id\")&&e.hasOwnProperty(\"client_secret\"))this.client_id=e.client_id,this.client_secret=e.client_secret,this.timeout=e.timeout||3e4;else{if(void 0!==e&&e)throw new Error(\"Please provide a valid options object with client_id and client_secret.\");console.error(\"Although some of our API endpoints can be used without an API key, in order to get the best experience, we strongly recommend that you obtain an API key and initialize this SDK with the provided client_id and client_secret. Get your API key today by visiting https://developers.gfycat.com/signup\"),a=\"/v1test\"}this.apiUrl=\"https://api.gfycat.com\"+a,this.retryLimit=2};s.prototype={authenticate:function(e,t){if(e||(e={}),!(this.client_id||this.client_secret||e.client_id||e.client_secret))return n(\"Please provide client_id and client_secret in options\",t);var e={api:\"/oauth\",endpoint:\"/token\",method:\"POST\",payload:{client_id:e.client_id||this.client_id,client_secret:e.client_secret||this.client_secret,grant_type:e.grant_type||\"client_credentials\"}},r=this;return t?this._request(e,function(e,n){e?t(e):(r._setToken(n),t(null,n))}):this._request(e).then(function(e){r._setToken(e),Promise.resolve(e)}).catch(function(e){Promise.reject(e)})},getCategories:function(e,t){return e||(e={}),this._request({api:\"/reactions\",endpoint:\"/populated\",method:\"GET\",query:{gfyCount:e.gfyCount||1,count:e.count||null,cursor:e.cursor||null,locale:e.locale||null}},t)},getTrendingCategories:function(e,t){return e||(e={}),this._request({api:\"/reactions\",endpoint:\"/populated\",method:\"GET\",query:{gfyCount:e.gfyCount||1,cursor:e.cursor||null,tagName:e.tagName||\"trending\"}},t)},getTrending:function(e,t){return e||(e={}),this._request({api:\"/gfycats\",endpoint:\"/trending\",method:\"GET\",query:{count:e.count||100,cursor:e.cursor||null,tagName:e.tagName||null}},t)},getTrendingTags:function(e,t){return e||(e={}),this._request({api:\"/tags\",endpoint:\"/trending\",method:\"GET\"},t)},getTrendingTagsPopulated:function(e,t){return e||(e={}),this._request({api:\"/tags\",endpoint:\"/trending/populated\",method:\"GET\",query:{count:e.count||100,cursor:e.cursor||null,gfyCount:e.gfyCount||1}},t)},search:function(e,t){return this._request({api:\"/gfycats\",endpoint:\"/search\",method:\"GET\",query:{search_text:e.search_text,count:e.count||100,start:e.start||null,cursor:e.cursor||null}},t)},searchById:function(e,t){return this._request({api:\"/gfycats\",endpoint:\"/\"+e.id,method:\"GET\"},t)},getRelatedContent:function(e,t){return this._request({api:\"/gfycats\",endpoint:\"/\"+e.id+\"/related\",method:\"GET\",query:{cursor:e.cursor,count:e.count,from:e.from}},t)},artifacts:function(e,t){return this._request({api:\"/gifartifacts\",endpoint:\"\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},method:\"POST\",payload:{uploadKey:e.uploadKey,tags:e.tags}},t)},stickers:function(e,t){return this._request({api:\"/stickers\",endpoint:e.search_text?\"/search\":\"\",method:\"GET\",query:{cursor:e.cursor,count:e.count,search_text:e.search_text}})},_request:function(e,t){if(!t&&!c)throw new Error(\"Callback must be provided if promises are unavailable\");if(void 0===e||!e)return n(\"Please provide valid options object\",t);var r=e.counter||0;if(r>=this.retryLimit){if(!t)return Promise.reject(\"Retry limit reached\");n(\"Retry limit reached\",t)}(this.access_token?\"Bearer \"+this.access_token:null)&&(void 0===e.headers&&(e.headers={}),e.headers.Authorization=this.access_token);var a=\"\";if(\"object\"==typeof e.query&&Object.keys(e.query).length){for(var s in e.query)null==e.query[s]&&delete e.query[s];a=\"?\"+o.stringify(e.query)}var u={request:{headers:e.headers||null,method:e.method,payload:e.payload||null,url:this.apiUrl+e.api+e.endpoint+a},timeout:e.timeout||this.timeout},l=this;if(!t)return new Promise(function(e,t){i.request(u,e,t)}).then(function(e){return Promise.resolve(e)}).catch(function(t){return 401===t&&\"/oauth\"!==e.api?l.authenticate({}).then(function(t){return e.counter=r+1,l._request(e)}).catch(function(e){return Promise.reject(e)}):Promise.reject(t)});var f=function(e){t(null,e)},d=function(n){401===n&&\"/oauth\"!==e.api?l.authenticate({},function(n,o){if(!n)return e.counter=r+1,l._request(e,t);t(n)}):t(n)};i.request(u,f,d)},_setToken:function(e){this.access_token=e.access_token,this.token_type=e.token_type}},e.exports=s}])});"],"names":["React","PureComponent","PropTypes","InfiniteScroll","el","scrollComponent","scrollEl","window","offset","props","useWindow","scrollTop","pageYOffset","document","documentElement","body","parentNode","isReverse","calculateTopPosition","offsetHeight","innerHeight","scrollHeight","clientHeight","Number","threshold","detachScrollListener","loadMore","pageLoaded","componentDidMount","pageStart","attachScrollListener","setScrollPosition","componentDidUpdate","render","children","element","hasMore","initialLoad","loader","scrollPosition","containerHeight","ref","node","elementProps","style","height","createElement","defaultLoader","offsetTop","offsetParent","scrollTo","addEventListener","scrollListener","removeEventListener","componentWillUnmount","setDefaultLoader","array","string","bool","object","func","isRequired","number","Gfycat","defaultKey","defaultSecret","activeKey","activeSecret","instance","gfycatSdk","key","secret","client_id","client_secret","GifTypes","Client4","saveAppPropsRequest","type","SAVE_APP_PROPS","saveAppProps","appProps","dispatch","getState","GfycatAPIKey","GfycatAPISecret","entities","general","config","authenticate","selectSearchText","searchText","SELECT_SEARCH_TEXT","updateSearchText","UPDATE_SEARCH_TEXT","searchBarTextSave","searchBarText","SAVE_SEARCH_BAR_TEXT","invalidateSearchText","INVALIDATE_SEARCH_TEXT","requestSearch","REQUEST_SEARCH","receiveSearch","count","start","json","RECEIVE_SEARCH","currentPage","receivedAt","Date","now","receiveSearchEnd","RECEIVE_SEARCH_END","errorSearching","err","SEARCH_FAILURE","receiveCategorySearch","tagName","RECEIVE_CATEGORY_SEARCH","receiveAt","clearSearchResults","CLEAR_SEARCH_RESULTS","requestSearchById","gfyId","SEARCH_BY_ID_REQUEST","payload","receiveSearchById","gfyItem","SEARCH_BY_ID_SUCCESS","errorSearchById","SEARCH_BY_ID_FAILURE","searchScrollPosition","SAVE_SEARCH_SCROLL_POSITION","searchPriorLocation","priorLocation","SAVE_SEARCH_PRIOR_LOCATION","searchGfycat","startIndex","resultsByTerm","gifs","search","sdk","search_text","then","errorMessage","items","cacheGifsRequest","gfycats","context","categories","tagsDict","trackEvent","length","keyword","catch","searchCategory","gfyCount","cursorPos","undefined","cursor","getTrendingCategories","requestCategoriesListIfNeeded","shouldSearch","state","isFetching","moreRemaining","didInvalidate","searchIfNeeded","toLowerCase","Promise","resolve","searchIfNeededInitial","shouldSearchInitial","searchById","id","response","shouldSearchById","cache","searchByIdIfNeeded","saveSearchScrollPosition","saveSearchPriorLocation","searchTextUpdate","saveSearchBarText","categoriesListRequest","REQUEST_CATEGORIES_LIST","categoriesListReceived","CATEGORIES_LIST_RECEIVED","categoriesListFailure","CATEGORIES_LIST_FAILURE","requestCategoriesList","shouldRequestCategoriesList","options","getCategories","newGfycats","tags","reduce","tag","width","tagsList","cacheRequest","CACHE_REQUEST","updating","cacheGifs","CACHE_GIFS","data","ItemTapAction","OPEN_EMBED_PAGE","SHARE","Tab","TRENDING","REACTIONS","appName","mattermost","GifSearchIcon","fill","GifSearchClearIcon","Component","connect","getTheme","changeOpacity","makeStyleFromTheme","LocalizedInput","t","mapStateToProps","theme","app","mapDispatchToProps","getStyle","background","backgroundColor","centerChannelBg","icon","centerChannelColor","inputBackground","input","borderColor","SearchBar","constructor","trim","split","join","searchInput","value","handleSearchTextChange","event","preventDefault","triggerSearch","blur","onSearch","parseSearchText","clearTimeout","searchTimeout","target","onCategories","action","isFilteredTags","setTimeout","setState","inputFocused","text","removeExtraSpaces","substr","filteredTags","filter","indexOf","Boolean","onTrending","updateSearchInputValue","defaultSearchText","prevProps","shouldComponentUpdate","nextProps","nextState","clearSearchButton","clearSearchHandle","handleSubmit","defaultMessage","handleChange","focusInput","blurInput","GifTrendingIcon","GifReactionsIcon","constants","header","borderBottomColor","iconActive","iconHover","Header","hovering","renderTabs","tabs","map","tab","index","link","renderTab","name","callback","Icon","callbackWrapper","paddingTop","App","appClassName","authenticateSdk","PostUtils","hasImageProxy","HasImageProxy","Categories","sendImpressions","content","filterTagsList","item","max1mbGif","avgColor","url","getImageSrc","replace","backgroundImage","SearchItem","top","left","itemWidth","itemClickHandler","paddingBottom","NoResultsIndicator","NoResultsVariant","ITEMS_PADDING","NUMBER_OF_COLUMNS_PORTRAIT","NUMBER_OF_COLUMNS_LANDSCAPE","WEBKIT_SCROLLBAR_WIDTH","SearchGrid","matchMedia","matches","numberOfColumns","handleItemClick","gfyid","columnsHeights","Math","min","max","containerWidth","container","offsetWidth","setNumberOfColumns","Array","scrollY","padding","getElementById","resizeHandler","scrollHandler","containerClassName","isEmpty","columnWidth","parseInt","leftPosition","searchItems","colIndex","minHeightColumnIndex","itemHeight","maxColumnHeight","emptySearch","ChannelSearch","channelName","GIF_SEARCH_THROTTLE_TIME_MS","Search","throttledSearchGif","Trending","basePath","itemTapType","shareEvent","appId","enableHistory","displayText","GifPicker","gif","onGifClick","title","max5mbGif","component","handleTrending","handleSearch","handleCategories"],"sourceRoot":""}