"use strict";(self.webpackChunk_mattermost_webapp=self.webpackChunk_mattermost_webapp||[]).push([[808],{96512:(e,t,a)=>{a.d(t,{Z:()=>d});var s=a(45697),n=a.n(s),i=a(67294),r=a(86896),o=a(44012),l=a(73727),c=a(94184),m=a.n(c);const u=e=>{let{url:t,className:a,onClick:s}=e;const{formatMessage:n}=(0,r.Z)();return i.createElement("div",{id:"back_button",className:m()("signup-header",a)},i.createElement(l.Link,{onClick:s,to:t},i.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:n({id:"generic_icons.back",defaultMessage:"Back Icon"})}),i.createElement(o.Z,{id:"web.header.back",defaultMessage:"Back"})))};u.propTypes={url:n().string,className:n().string,onClick:n().func},u.defaultProps={url:"/"};const d=u},78453:(e,t,a)=>{a.d(t,{Z:()=>i}),a(19601);var s=a(67294),n=a(22826);const i=function(e){return t=>{const a=(0,n.Z)();return s.createElement(e,Object.assign({usageDeltas:a},t))}}},37635:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(45697),n=a.n(s),i=a(67294),r=a(44012);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends i.PureComponent{render(){const{customDescriptionText:e,siteName:t}=this.props;let a=null;return a=e||i.createElement(r.Z,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),i.createElement(i.Fragment,null,i.createElement("h1",{id:"site_name"},t),i.createElement("h3",{id:"site_description",className:"color--light"},a))}}o(l,"propTypes",{customDescriptionText:n().string,siteName:n().string}),o(l,"defaultProps",{siteName:"Mattermost"})},4808:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Q});var s=a(14494),n=a(97779),i=a(5977),r=a(92743),o=a(74147),l=a(6498),c=a(22742),m=a(33407),u=a(34111),d=a(5596),p=a(12707),g=a(78453),h=a(28823),f=a(60690),_=a(46195),E=a(45697),b=a.n(E),T=(a(88674),a(32023),a(74916),a(23123),a(67294)),v=a(44012),C=a(73727),N=a(34288),P=a(59925),M=a(47470),k=a(66788),R=a(16406),Z=a(13301),y=a(96512),S=a(19476),I=a(36846),L=a(37635),D=a(73406),w=a(45288),A=a(23279),q=a.n(A);function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class x extends T.PureComponent{constructor(e){super(e),U(this,"node",void 0),U(this,"validateBuffer",(e=>e<100?100:Math.abs(e))),U(this,"getAmountOfPages",((e,t)=>Math.ceil(e/t))),U(this,"handleScroll",(()=>{const{isFetching:e,isEndofData:t}=this.state,{callBack:a,bufferValue:s,totalItems:n,itemsPerPage:i,pageNumber:r}=this.props,o=this.node.current,l=this.validateBuffer(s),c=o.scrollHeight-o.clientHeight-l;!(o.scrollTop>c)||t||e||this.setState({isFetching:!0},(async()=>{if(await a(),this.setState({isFetching:!1}),0===n)return void this.setState({isEndofData:!0});const e=this.getAmountOfPages(n,i);r===e&&this.setState({isEndofData:!0})}))})),U(this,"debounceHandleScroll",q()(this.handleScroll,200)),this.state={isFetching:!1,isEndofData:!1},this.node=T.createRef()}componentDidMount(){var e;null===(e=this.node.current)||void 0===e||e.addEventListener("scroll",this.debounceHandleScroll)}componentWillUnmount(){var e;null===(e=this.node.current)||void 0===e||e.removeEventListener("scroll",this.debounceHandleScroll)}render(){const{children:e,endOfDataMessage:t,styleClass:a,loaderStyle:s}=this.props,{isEndofData:n,isFetching:i}=this.state,r=!n&&i;return T.createElement(T.Fragment,null,T.createElement("div",{className:"infinite-scroll ".concat(a),ref:this.node},e,r&&T.createElement(S.Z,{style:s,message:" "}),!r&&t))}}U(x,"propTypes",{children:b().node.isRequired,callBack:b().func.isRequired,endOfDataMessage:b().string,styleClass:b().string,bufferValue:b().number,totalItems:b().number.isRequired,itemsPerPage:b().number.isRequired,pageNumber:b().number.isRequired}),U(x,"defaultProps",{bufferValue:100,endOfDataMessage:"",styleClass:"",loaderStyle:{}}),a(33948),a(41817);var J=a(68492),j=a(15558),O=a(89959),F=a(86896);function B(e){const{formatMessage:t}=(0,F.Z)();return T.createElement("span",e,T.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:Y,role:"img","aria-label":t({id:"generic_icons.info",defaultMessage:"Info Icon"})},T.createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},T.createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"}))))}const Y={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};var H=a(87993),G=a(31055);function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class K extends T.PureComponent{constructor(){super(...arguments),V(this,"handleTeamClick",(e=>{e.preventDefault(),this.props.onTeamClick(this.props.team)})),V(this,"renderDescriptionTooltip",(()=>{const e=this.props.team;if(!e.description)return null;const t=T.createElement(O.Z,{id:"team-description__tooltip"},e.description);return T.createElement(j.Z,{delayShow:1e3,placement:"top",overlay:t,rootClose:!0,container:this},T.createElement(B,{className:"icon icon--info"}))}))}render(){const{canJoinPublicTeams:e,canJoinPrivateTeams:t,loading:a,team:s}=this.props;let n;n=a?T.createElement(J.Z,{className:"fa fa-refresh fa-spin right signup-team__icon",component:"span",title:{id:(0,H.t)("generic_icons.loading"),defaultMessage:"Loading Icon"}}):T.createElement(J.Z,{className:"fa fa-angle-right right signup-team__icon",component:"span",title:{id:(0,H.t)("select_team.join.icon"),defaultMessage:"Join Team Icon"}});const i=s.allow_open_invite&&e||!s.allow_open_invite&&t;return T.createElement("div",{className:"signup-team-dir"},this.renderDescriptionTooltip(),T.createElement("a",{href:"#",id:G.x(s.display_name),onClick:i?this.handleTeamClick:void 0,className:i?"":"disabled"},T.createElement("span",{className:"signup-team-dir__name"},s.display_name),!s.allow_open_invite&&T.createElement(J.Z,{className:"fa fa-lock light",title:{id:(0,H.t)("select_team.private.icon"),defaultMessage:"Private team"}}),i&&n))}}function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}V(K,"propTypes",{onTeamClick:b().func.isRequired,loading:b().bool.isRequired,canJoinPublicTeams:b().bool.isRequired,canJoinPrivateTeams:b().bool.isRequired});class z extends T.PureComponent{constructor(e){super(e),W(this,"fetchMoreTeams",(async()=>{const{currentPage:e}=this.state,{actions:t}=this.props,a=await t.getTeams(e,30,!0);a.error||a.error instanceof Error||this.setState((e=>({currentPage:e.currentPage+1})))})),W(this,"handleTeamClick",(async e=>{const{siteURL:t,currentUserRoles:a}=this.props;this.setState({loadingTeamId:e.id});const{data:s,error:n}=await this.props.actions.addUserToTeam(e.id,this.props.currentUserId);if(s&&void 0!==this.props.history)this.props.history.push("/".concat(e.name,"/channels/").concat(k.ZP.DEFAULT_CHANNEL));else if(n){let e=n.message;"api.team.add_members.user_denied"===n.server_error_id&&(e=void 0!==a&&a.includes(k.ZP.PERMISSIONS_SYSTEM_ADMIN)?T.createElement(w.Z,{id:"join_team_group_constrained_denied_admin",defaultMessage:"You need to be a member of a linked group to join this team. You can add a group to this team [here](".concat(t,"/admin_console/user_management/groups)."),values:{siteURL:t}}):T.createElement(w.Z,{id:"join_team_group_constrained_denied",defaultMessage:"You need to be a member of a linked group to join this team."})),this.setState({error:e,loadingTeamId:""})}})),W(this,"handleLogoutClick",(e=>{e.preventDefault(),(0,P.L9)("select_team","click_logout"),(0,N.gc)("/login")})),W(this,"clearError",(e=>{e.preventDefault(),this.setState({error:null})})),this.state={loadingTeamId:"",error:null,endofTeamsData:!1,currentPage:0,currentListableTeams:[]}}static getDerivedStateFromProps(e,t){return e.listableTeams.length!==t.currentListableTeams.length?{currentListableTeams:e.listableTeams.slice(0,30*t.currentPage)}:null}componentDidMount(){(0,P.L9)("signup","signup_select_team",{userId:this.props.currentUserId}),this.fetchMoreTeams(),void 0!==this.props.currentUserRoles&&this.props.actions.loadRolesIfNeeded(this.props.currentUserRoles.split(" "))}render(){const{currentPage:e,currentListableTeams:t}=this.state,{currentUserIsGuest:a,canManageSystem:s,customDescriptionText:n,isMemberOfTeam:i,siteName:r,canCreateTeams:o,canJoinPublicTeams:l,canJoinPrivateTeams:c,totalTeamsCount:u,isCloud:d,isFreeTrial:p,usageDeltas:{teams:{active:g}}}=this.props,h=d&&!p&&g>=0;let f;if(this.state.loadingTeamId)f=T.createElement(S.Z,null);else if(this.state.error)f=T.createElement("div",{className:"signup__content"},T.createElement("div",{className:"form-group has-error"},T.createElement("label",{className:"control-label"},this.state.error)));else if(a)f=T.createElement("div",{className:"signup__content"},T.createElement("div",{className:"form-group has-error"},T.createElement("label",{className:"control-label"},T.createElement(v.Z,{id:"signup_team.guest_without_channels",defaultMessage:"Your guest account has no channels assigned. Please contact an administrator."}))));else{let a=[];t.forEach((e=>{(e.allow_open_invite&&l||!e.allow_open_invite&&c)&&a.push(T.createElement(K,{key:"team_"+e.name,team:e,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===e.id,canJoinPublicTeams:l,canJoinPrivateTeams:c}))})),0===a.length&&(o||s)?a=T.createElement("div",{className:"signup-team-dir-err"},T.createElement("div",null,h?T.createElement(v.Z,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}):T.createElement(v.Z,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))):0===a.length&&(a=T.createElement("div",{className:"signup-team-dir-err"},T.createElement("div",null,T.createElement(I.Z,{permissions:[m.Pl.CREATE_TEAM]},T.createElement(v.Z,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."})),T.createElement(I.Z,{permissions:[m.Pl.CREATE_TEAM],invert:!0},T.createElement(v.Z,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}))))),f=T.createElement("div",{id:"teamsYouCanJoinContent",className:"signup__content"},T.createElement("h4",null,T.createElement(v.Z,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),T.createElement(x,{callBack:this.fetchMoreTeams,styleClass:"signup-team-all",totalItems:u,itemsPerPage:30,bufferValue:280,pageNumber:e,loaderStyle:{padding:"0px",height:"40px"}},a))}const _=!h&&T.createElement(I.Z,{permissions:[m.Pl.CREATE_TEAM]},T.createElement("div",{className:"margin--extra",style:{marginTop:"0.5em"}},T.createElement(C.Link,{id:"createNewTeamLink",to:"/create_team",onClick:()=>(0,P.L9)("select_team","click_create_team"),className:"signup-team-login"},T.createElement(v.Z,{id:"login.createTeam",defaultMessage:"Create a team"}))));let E,b;return M.k()||(E=T.createElement(I.Z,{permissions:[m.Pl.MANAGE_SYSTEM]},T.createElement("div",{className:"mt-8 hidden-xs"},T.createElement(C.Link,{to:"/admin_console",className:"signup-team-login",onClick:()=>(0,P.L9)("select_team","click_system_console")},T.createElement(v.Z,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))))),b=this.state.error?T.createElement(y.Z,{onClick:this.clearError}):i?T.createElement(y.Z,null):T.createElement("div",{className:"signup-header"},T.createElement("a",{href:"#",id:"logout",onClick:this.handleLogoutClick},T.createElement(D.Z,null),T.createElement(v.Z,{id:"web.header.logout",defaultMessage:"Logout"}))),T.createElement("div",null,T.createElement(Z.Z,null),b,T.createElement("div",{className:"col-sm-12"},T.createElement("div",{className:"select-team__container signup-team__container"},T.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:R.Z}),T.createElement(L.Z,{customDescriptionText:n,siteName:r}),f,_,E)))}}W(z,"propTypes",{currentUserId:b().string.isRequired,currentUserRoles:b().string.isRequired,currentUserIsGuest:b().bool,customDescriptionText:b().string,isMemberOfTeam:b().bool.isRequired,listableTeams:b().array.isRequired,siteName:b().string,canCreateTeams:b().bool.isRequired,canManageSystem:b().bool.isRequired,canJoinPublicTeams:b().bool.isRequired,canJoinPrivateTeams:b().bool.isRequired,history:b().any,siteURL:b().string,actions:b().shape({getTeams:b().func.isRequired,loadRolesIfNeeded:b().func.isRequired,addUserToTeam:b().func.isRequired}).isRequired,totalTeamsCount:b().number.isRequired,isCloud:b().bool.isRequired,isFreeTrial:b().bool.isRequired});const Q=(0,n.compose)(i.EN,(0,s.connect)((function(e){const t=(0,c.iE)(e),a=(0,p.ts)(e),s=Object.values((0,d.gb)(e)),n=(0,c.lJ)(e),i=(0,l.oR)(e),r=(0,_.Ht)(n),o="true"===(null==i?void 0:i.is_free_trial);return{currentUserId:a.id,currentUserRoles:a.roles||"",currentUserIsGuest:(0,f.nJ)(a.roles),customDescriptionText:t.CustomDescriptionText,isMemberOfTeam:s&&s.length>0,listableTeams:(0,d.LN)(e,a.locale),siteName:t.SiteName,canCreateTeams:(0,u.AN)(e,{permission:m.Pl.CREATE_TEAM}),canManageSystem:(0,u.AN)(e,{permission:m.Pl.MANAGE_SYSTEM}),canJoinPublicTeams:(0,u.AN)(e,{permission:m.Pl.JOIN_PUBLIC_TEAMS}),canJoinPrivateTeams:(0,u.AN)(e,{permission:m.Pl.JOIN_PRIVATE_TEAMS}),siteURL:t.SiteURL,totalTeamsCount:e.entities.teams.totalCount||0,isCloud:r,isFreeTrial:o}}),(function(e){return{actions:(0,n.bindActionCreators)({getTeams:r.LK,loadRolesIfNeeded:o.k3,addUserToTeam:h.aJ},e)}})),g.Z)(z)},73406:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(67294),n=a(86896);function i(){const{formatMessage:e}=(0,n.Z)();return s.createElement("i",{className:"fa fa-1x fa-angle-left",title:e({id:"generic_icons.logout",defaultMessage:"Logout Icon"})})}},16406:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"files/ab8aa80cba445eb0fb75e6611c292567.png"}}]);
//# sourceMappingURL=808.7b60ea2d57df601cb90b.js.map